<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1.0,
                                   user-scalable=yes">
    <meta name="author" content="Daniel Jour">
            <meta name="dcterms.date" content="2023-11-10">
                <title>Link two serial ports on linux (and sniff on the traffic) – musteresel's blog</title>
    <script async defer src="../../../js.min.js"></script>
    <style>code{white-space: pre;}</style>
        <link rel="stylesheet" type="text/css" href="../../../css.min.css">
            <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <header>
      <p class="heading"><a href="../../../index.html">musteresel's blog</a></p>
    </header>
    <hr>
    <article>
            <header>
        <h1 class="title">Link two serial ports on linux (and sniff on the traffic)</h1>
                                <p class="date">2023-11-10</p>
                        <p class="tags">tagged:
                    <a href="../../../posts/tagged/linux/index.html">linux</a></p>
              </header>
      <p>I’m working on a system atm where one part communicates with the other over a (full duplex, no flow control) UART connection – so far nothing extraodinary. Normally when I need to see what’s happening in the communication between those two parts (especially if it’s timing related) I use a logic analyser and capture the traffic on both wires for later / live analysis.</p>
<p>But having the logic analyser not at hand, I used two UART to USB bridges (FTDI adapters) to connect my laptop to both parts, and then linked those two ports up (with added logging of the output) using <code>socat</code>:</p>
<pre><code>socat -v /dev/ttyUSB0,rawer,b921600 /dev/ttyUSB1,rawer,b921600</code></pre>
<p>The <code>-v</code> tells socat to write any transferred data also to stderr, but with some conversions for readability. And also with a prefix of <code>&gt;</code> or <code>&lt;</code> to indicate flow direction. One could also use <code>-x</code> to get the data as hex (with flow direction indication).</p>
<p>Usage of <code>rawer</code> was necessary in my case - most likely to avoid any conversions (line endings?) from happening. The <code>b921600</code> is just the baudrate. <code>socat</code> of course also has options to specify things like parity and so on. Those options should be documented in <code>man socat</code> on any linux distribution.</p>
            <hr>
      <footer>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSfV7TfT4OIcpopar3hBoLnzHBmbOi85ysjX23cQsvKzBCy4Dw/viewform?usp=pp_url&entry.1949939362=posts/2023/11/linux-link-serial-ports.html">
          Send me a message regarding this post</a>
      </footer>
      
    </article>
    <hr>
    <footer>
      <a href="../../../legal.html">Legal Notice / Impressum</a>
      &nbsp;&nbsp;
      <a href="../../../privacy.html">Privacy / Datenschutz</a>
    </footer>
  </body>
</html>
